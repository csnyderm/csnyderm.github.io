<!DOCTYPE HTML>
<!--
	Aerial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)

    Are you searching for the password? I'll give you a hint then. The password has three parts, separated by ampersands (&).
    1. My initials (First, middle, and last)
    2. The length of my first and last name
    3. What do I say you have to enter the password to do on the websit3?

    Ex. this&is&exampl3
-->

<html class="dark">
	<head>
		<title>CSnyder</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
        <!--<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/tailwind.css" />-->
        <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/aerial.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
  <body class="is-preload">
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="wrapper">
			<div id="bg"></div>
			<div id="overlay"></div>
			<div id="main">

				<!-- Header -->
					<header id="header">
						<h1>Cole Snyder</h1>
						<p>Computer Security Major &nbsp;&bull;&nbsp; Programmer &nbsp;&bull;&nbsp; STEM Outreach</p>
						<div id="dialogWrap">
							<div id="dialogWrapCell">
								<div id="mainDialog">
									<div id="dialogText">To explore the website, please enter the password:</div>
									<div id="passArea">
										<p id="passwordPrompt" class="text-slate-900">Please reach out for the password or Inspect Element.</p>
										<input id="pass" type="password" name="pass" class="bg-gray-300 border-gray-400" autofocus>
										<div>
											<span id="messageWrapper">
												<span id="invalidPass" class="error">Sorry, please try again.</span>
												<span id="trycatcherror" class="error">Sorry, something went wrong.</span>
												<span id="success" class="notifyText">Success!</span>
												&nbsp;
											</span>
											<button id="submitPass" type="button" class="!bg-slate-800">Submit</button>
											<div style="clear: both;"></div>
										</div>
									</div>
									<div id="securecontext" class="error">
										<p>
											Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
										</p>
									</div>
									<div id="nocrypto" class="error">
										<p>
											Your web browser appears to be outdated. Please visit this page using a modern browser.
										</p>
									</div>
								</div>
							</div>
						</div>

						<nav>
							<ul>
								<li><a href="https://www.linkedin.com/in/cole-snyder-m/" class="icon brands fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
								<li><a href="https://github.com/csnyderm" class="icon brands fa-github" target="_blank"><span class="label">Github</span></a></li>
								<li><a href="mailto:cole.snyder.m@gmail.com" class="icon solid fa-envelope" target="_blank"><span class="label">Email</span></a></li>
							</ul>
						</nav>
					</header>

					<footer id="footer">
						<span> Cole Snyder. &nbsp;&bull;&nbsp; Design: <a href="http://html5up.net">HTML5 UP</a>. &nbsp;&bull;&nbsp; Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a></span>
					</footer>

			</div>
		</div>
		<script>
			window.onload = function() { document.body.classList.remove('is-preload'); }
			window.ontouchmove = function() { return false; }
			window.onorientationchange = function() { document.body.scrollTop = 0; }
		</script>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                document.body.classList.add('is-preload');
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
